<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Knockout.viewmodel : " />
    <script src="../javascripts/prism.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="../stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="screen" href="../stylesheets/prism.css">

    <title>Knockout Viewmodel - Cleaner, Faster, Better Knockout Mapping</title>
</head>

<body class="language-javascript">

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
            <a id="forkme_banner" href="https://github.com/coderenaissance/knockout.viewmodel">View on GitHub</a>

            <h1 id="project_title">Knockout Viewmodel Plugin  </h1>
            <h2 id="project_tagline">Cleaner, Faster, Better Knockout Mapping</h2>

            <section id="downloads">
                <a class="zip_download_link" href="https://github.com/coderenaissance/knockout.viewmodel/zipball/master">Download this project as a .zip file</a>
                <a class="tar_download_link" href="https://github.com/coderenaissance/knockout.viewmodel/tarball/master">Download this project as a tar.gz file</a>
                <div style="text-align: right; font-weight: bold; font-size: larger">
                    Download Latest Version<br />
                    <a style="font-size: .8em" href="http://nuget.org/packages/knockout.viewmodel/">(also on Nuget)</a>
                </div>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
        <div id="main_content_wrap" class="outer">
        <section id="main_content" class="inner">
            <h2>mappingBuilder - transform</h2>
            <section id="intro" class="inner">
				<h3>transform ( path, mapping) </h3>
                Allows for model transformations. For fromModel and updateFromModel processing the map function acts as a preprocessor on the incoming model path data (before any viewmodel processing has been done on it). For toModel processing the unmap function acts as a post processor on the path data after it has been mapped back to a model value. The combination of map and unmap allow for objects in the model to undergo hierchical structure transformations that make them easier to consume in the view; these strutural changes can then be untransformed when after being converted back to a model. Transform can also allow string and numeric values to be fomatted/converted for proper consumption.&nbsp;				
				<h5>Parameters:</h5>
                <ul>
					<li>path - a single path as a string</li>
					<li>mapping - either a object containing map and unmap function properties of a map function</li>
                </ul>	
				<h5>Example - transform null array values to empty arrays</h5>
                <pre><code>var mappingOptions = ko.viewmodel.mappingBuilder()
	.transform("{root}.users", function(value){
		return value || [];
	});//We&#39;re assuming that serverside an empty array is ok, so no need to provide an unmap to convert back	

var viewmodel = ko.viewmodel.fromModel(model, mappingOptions);
                </code></pre>
                <h5>Example - transform null to empty string and back</h5>
                <pre><code>var mappingOptions = ko.viewmodel.mappingBuilder()
	.transform("{root}.users[i].firstName", {
		map: function(value){
			return (value == null || value == undefined) ? &quot;&quot; : value;
		},
		unmap: function(value){
			return value == &quot;&quot; ? null : value;
		}
	});

var viewmodel = ko.viewmodel.fromModel(model, mappingOptions);
                </code></pre>
				<h5>Example - transform object structure</h5>
                <pre><code>
var mappingOptions = ko.viewmodel.mappingBuilder()
	.transform("{root}.currentUser", {//a simplistic and contrived example
		map: function(user){
			user.IsReadOnly = !user.Permissions.IsAllowedReadWrite;
			user.IsManager = user.Permissions.IsAllowedManagerAccess;
			user.IsSysAdmin = user.Permissions.IsGodUser;
			delete user.Permissions;//we don&#39;t need this anymore
			return user;//the returned the object will be converted to a viewmodel
		},
		unmap: function(user){
			user.Permissions = {
				IsAllowedReadWrite: !user.IsReadOnly,
				IsAllowedManagerAccess: user.IsSysAdmin,
				IsGodUser: user.IsSysAdmin
			};
			delete user.IsReadOnly;
			delete user.IsManager;
			delete user.IsSysAdmin;
			return user;//this is the object that will be place on the model
		}
	});

var viewmodel = ko.viewmodel.fromModel(model, mappingOptions);
                            </code></pre>
        </section>
        </section>
    </div>
    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
        <footer class="inner">
            <p class="copyright">Knockout.viewmodel maintained by ps://github.com/coderenaissance">coderenaissance</a></p>
            <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
        </footer>
    </div>

</body>
</html>
