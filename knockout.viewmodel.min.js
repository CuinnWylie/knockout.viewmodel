ko.viewmodel=function(){function m(a){return null===a||void 0===a}function u(a){return null===a||void 0===a||a.constructor===String||a.constructor===Number||a.constructor===Boolean||a instanceof Date}function n(a,e,d,b){var c,f,g,j,k=e?e[d.full]||e[d.parent]||e[d.name]||{}:{};l&&l(d,k,e);l&&l(d);if(g=k.custom)"function"===typeof g?c=g(a):(c=g.map(a),m(c)||(c.$$$map=g.map,g.unmap&&(c.$$$unmap=g.unmap)));else if(k.append)m(a)||(a.$$$appended=void 0),c=a;else{if(k.exclude)return;if(u(a))c=d.parentIsArray?
a:w(a);else if(a instanceof Array){c=[];f=0;for(g=a.length;f<g;f++)c[f]=n(a[f],e,{name:"[i]",parent:d.name+"[i]",full:d.full+"[i]",parentIsArray:!0});if((!0!==v||!d.parentIsArray)&&!b){j={name:"[i]",parent:d.name+"[i]",full:d.full+"[i]",parentIsArray:!0};c=x(c);if(a=k.arrayChildId)c.$$$childIdName=a;c.$$$push=c.push;c.$$$unshift=c.unshift;c.push=function(a,b){void 0!==a&&(a=!b||b.map?n(a,e,j):a,c.$$$push(a))};c.unshift=function(a,b){void 0!==a&&(a=!b||b.map?n(a,e,j):a,c.$$$unshift(a))}}}else if(a.constructor===
Object)for(f in c={},a)b=n(a[f],e,{name:f,parent:("[i]"===d.name?d.parent:d.name)+"."+f,full:d.full+"."+f}),void 0!==b&&(c[f]=b)}return k.extend?k.extend(c)||c:c}function q(a,e){var d,b,c,f=p(a),g,j;g=a!==f;l&&l(e);if(g||!(a&&a.constructor===Function)){if(a&&a.$$$unmap)d=a.$$$unmap(a);else if(g&&u(f)||m(f)||f.hasOwnProperty("$$$appended"))d=f;else if(f instanceof Array){d=[];b=0;for(c=f.length;b<c;b++)d[b]=q(f[b],{name:"[i]",parent:e.name+"[i]",full:e.full+"[i]"})}else if(f.constructor===Object)for(b in d=
{},f){if("$$$"!==b.substr(0,2)&&(g=f[b],!ko.isComputed(g)&&!((c=p(g))&&c.constructor===Function)))if(j=q(g,{name:b,parent:("[i]"===e.name?e.parent:e.name)+"."+b,full:e.full+"."+b}),void 0!==j||!((c=p(g))&&c.constructor===Function))d[b]=j}else!g&&"function"!==typeof f&&(d=f);return d}}function r(a,e,d){var b,c,f,g,j,k,h=p(e);c=e!==h;l&&l(d);if(m(e)||!(e.hasOwnProperty("$$$appended")||h===a))if(c&&m(h)^m(a))e(a);else if(a&&h&&h.constructor==Object&&a.constructor===Object)for(b in a)(e=h[b])&&"function"===
typeof e.$$$map?y(e)?e(p(e.$$$map(a[b]))):h[b]=h[b].$$$map(a[b]):m(a[b])&&h[b]&&h[b].constructor===Object?h[b]=a[b]:r(a[b],h[b],{name:b,parent:("[i]"===d.name?d.parentChildName:d.name)+"."+b,full:d.full+"."+b});else if(h&&h instanceof Array)if(k=e.$$$childIdName){g=[];for(b=a.length-1;0<=b;b--){f=!1;j=a[b][k];for(c=h.length-1;0<=c;c--)if(j===h[c][k]()){r(a[b],h[c],{name:"[i]",parentChildName:d.name+"[i]",full:d.full+"[i]"});f=!0;g[c]=!0;break}f||e.splice(b,1)}for(b=a.length-1;0<=b;b--)g[b]||e.push(a[b])}else if(c=
[],h=e.$$$map,"function"===typeof h){b=0;for(d=a.length;b<d;b++)c[b]=a[b];e(h(c))}else{e(c);b=0;for(d=a?a.length:0;b<d;b++)e.push(a[b])}else c&&e(a)}function s(a,e){v=a.mappingCompatability;window.console&&a.logging?(console.log(e),l=function(a,b,c){console.log("- "+(b&&b.settingType?b.settingType+" "+a.full+" (matched: '"+((c[a.full]?a.full:"")||(c[a.parent]?a.parent:"")||a.name)+"')":"default "+a.full))}):l=void 0}var p=ko.utils.unwrapObservable,y=ko.isObservable,w=ko.observable,x=ko.observableArray,
t={name:"{root}",parent:"{root}",full:"{root}"},l,v;return{options:{mappingCompatability:!1,logging:!1},fromModel:function(a,e){var d={},b,c,f,g,j;for(j in e)if(b=e[j]||{},b instanceof Array){c=0;for(g=b.length;c<g;c++)f=b[c],d[f]={},d[f][j]=!0,d[f].settingType=j}else for(f in b)d[f]={},d[f][j]=b[f],d[f].settingType=j;s(this.options,"Mapping From Model");return n(a,d,t)},toModel:function(a){s(this.options,"Mapping To Model");return q(a,t)},updateFromModel:function(a,e){s(this.options,"Update From Model");
return r(e,a,t)}}}();