//version 1.1.3 Copyright 2013, Dave Herren 
ko.viewmodel=function(){function n(a,c,f){window.console.log("- "+(c&&c.settingType?c.settingType+" "+a.qualifiedName+" (matched: '"+((f[a.qualifiedName]?a.qualifiedName:"")||(f[a.parentChildName]?a.parentChildName:"")||a.name)+"')":"default "+a.qualifiedName))}function p(a,c){return null===a||"string"===c||"number"===c||"boolean"===c||"object"===c&&"function"===typeof a.getMonth}function l(a,c){return null!=a&&"object"===c&&void 0===a.length&&!p(a,c)}function q(a,c){return null!=a&&"object"===c&&
void 0!==a.length}function m(a,c,f){var b,d,e,g;b=typeof a;var k,j=c?c[f.qualifiedName]||c[f.parentChildName]||c[f.name]||{}:{};ko.viewmodel.logging&&window.console&&n(f,j,c);if(j.custom)"function"===typeof j.custom?d=j.custom(a):(d=j.custom.map(a),null===d||void 0===d||(d["..map"]=j.custom.map,j.custom.unmap&&(d["..unmap"]=j.custom.unmap)));else if(j.append)null!=a&&(a["..appended"]=void 0),d=a;else{if(j.exclude)return;if(p(a,b))d=f.parentIsArray?a:v(a),j.id&&(d["..isid"]=!0);else if(l(a,b)){d={};
g=void 0;for(e in a)b=m(a[e],c,{name:e,parentChildName:("[i]"===f.name?f.parentChildName:f.name)+"."+e,qualifiedName:f.qualifiedName+"."+e}),void 0!==b&&(d[e]=b,g=d[e]&&d[e]["..isid"]?e:g);g&&(d["..idName"]=g)}else if(q(a,b)){d=[];e=0;for(b=a.length;e<b;e++)d[e]=m(a[e],c,{name:"[i]",parentChildName:f.name+"[i]",qualifiedName:f.qualifiedName+"[i]",parentIsArray:!0});if(!0!==ko.viewmodel.mappingCompatability||!f.parentIsArray)k={name:"[i]",parentChildName:f.name+"[i]",qualifiedName:f.qualifiedName+
"[i]",parentIsArray:!0},d=w(d),d["..push"]=d.push,d["..unshift"]=d.unshift,d.push=function(a,b){void 0!==a&&(a=!b||b.map?m(a,c,k):a,d["..push"](a))},d.unshift=function(a,b){void 0!==a&&(a=!b||b.map?m(a,c,k):a,d["..unshift"](a))}}}return j.extend?j.extend(d)||d:d}function r(a,c){var f,b,d,e=s(a);d=a===e;var g=typeof e;n(c,null);if(null===a)return null;if(void 0!==a&&a["..unmap"])f=a["..unmap"](a);else if(null===e||e.hasOwnProperty("..appended")||!d&&p(e,g))f=e;else if(l(e,g))for(b in f={},e)f[b]=r(e[b],
{name:b,parentChildName:("[i]"===c.name?c.parentChildName:c.name)+"."+b,qualifiedName:c.qualifiedName+"."+b});else if(q(e,g)){f=[];b=0;for(d=e.length;b<d;b++)f.push(r(e[b],{name:"[i]",parentChildName:c.name+"[i]",qualifiedName:c.qualifiedName+"[i]"}))}return f}function t(a,c,f){var b,d,e,g,k,j,h=s(c);d=typeof h;e=c!==h;n(f,null);if(!(null===c||void 0===c)&&!c.hasOwnProperty("..appended"))if(!(void 0===c||h===a))if(e&&(null===h||void 0===h)^(null===a||void 0===a))c(a);else if(l(h,d)&&l(a,d))for(b in a)(c=
h[b])&&"function"===typeof c["..map"]?x(c)?c(s(c["..map"](a[b]))):h[b]=h[b]["..map"](a[b]):a&&null===a[b]&&l(h[b],typeof h[b])?h[b]=null:t(a[b],h[b],{name:b,parentChildName:("[i]"===f.name?f.parentChildName:f.name)+"."+b,qualifiedName:f.qualifiedName+"."+b});else if(q(h,d))if(j=h[0]["..idName"]){g=[];for(b=a.length-1;0<=b;b--){e=!1;k=a[b][j];for(d=h.length-1;0<=d;d--)if(k===h[d][j]()){t(a[b],h[d],{name:"[i]",parentChildName:f.name+"[i]",qualifiedName:f.qualifiedName+"[i]"});e=!0;g[d]=!0;break}e||
c.splice(b,1)}for(b=a.length-1;0<=b;b--)g[b]||c.push(a[b])}else{c([]);b=0;for(f=a.length;b<f;b++)"function"===typeof c["..map"]?c.push(c["..map"](a)):c.push(a[b])}else e&&c(a)}var s=ko.utils.unwrapObservable,x=ko.isObservable,v=ko.observable,w=ko.observableArray,u={name:"{root}",parentChildName:"{root}",qualifiedName:"{root}"};return{mappingCompatability:!1,logging:!1,fromModel:function(a,c){var f={},b,d,e,g;for(g in c)if(b=c[g]||{},void 0!==b.length)for(d=0;d<b.length;d++)e=b[d],f[e]={},f[e][g]=
!0,f[e].settingType=g;else for(e in b)f[e]={},f[e][g]=b[e],f[e].settingType=g;ko.viewmodel.logging&&window.console&&window.console.log("Mapping From Model");return m(a,f,u)},toModel:function(a){ko.viewmodel.logging&&window.console&&window.console.log("Mapping To Model");return r(a,u)},updateFromModel:function(a,c){ko.viewmodel.logging&&window.console&&window.console.log("Update From Model");return t(c,a,u)}}}();