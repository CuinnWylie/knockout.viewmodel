//version 1.1.2 Copyright 2013 Dave Herren
ko.viewmodel=function(){function n(a,d,e){window.console.log("- "+(d&&d.settingType?d.settingType+" "+a.qualifiedName+" (matched: '"+((e[a.qualifiedName]?a.qualifiedName:"")||(e[a.parentChildName]?a.parentChildName:"")||a.name)+"')":"default "+a.qualifiedName))}function p(a,d){return null===a||"string"===d||"number"===d||"boolean"===d||"object"===d&&"function"===typeof a.getMonth}function l(a,d){return null!=a&&"object"===d&&void 0===a.length&&!p(a,d)}function q(a,d){return null!=a&&"object"===d&&
void 0!==a.length}function m(a,d,e){var b,c,f,g;b=typeof a;var k,j=d?d[e.qualifiedName]||d[e.parentChildName]||d[e.name]||{}:{};ko.viewmodel.logging&&window.console&&n(e,j,d);if(j.custom)"function"===typeof j.custom?c=j.custom(a):(c=j.custom.map(a),null===c||void 0===c||(c["..map"]=j.custom.map,j.custom.unmap&&(c["..unmap"]=j.custom.unmap)));else if(j.append)null!=a&&(a["..appended"]=void 0),c=a;else{if(j.exclude)return;if(p(a,b))c=e.parentIsArray?a:v(a),j.id&&(c["..isid"]=!0);else if(l(a,b)){c={};
g=void 0;for(f in a)b=m(a[f],d,{name:f,parentChildName:("[i]"===e.name?e.parentChildName:e.name)+"."+f,qualifiedName:e.qualifiedName+"."+f}),void 0!==b&&(c[f]=b,g=c[f]&&c[f]["..isid"]?f:g);g&&(c["..idName"]=g)}else if(q(a,b)){c=[];for(f=0;f<a.length;f++)c[f]=m(a[f],d,{name:"[i]",parentChildName:e.name+"[i]",qualifiedName:e.qualifiedName+"[i]",parentIsArray:!0});if(!0!==ko.viewmodel.mappingCompatability||!e.parentIsArray)k={name:"[i]",parentChildName:e.name+"[i]",qualifiedName:e.qualifiedName+"[i]",
parentIsArray:!0},c=w(c),c["..push"]=c.push,c["..unshift"]=c.unshift,c.push=function(a,b){void 0!==a&&(a=!b||b.map?m(a,d,k):a,c["..push"](a))},c.unshift=function(a,b){void 0!==a&&(a=!b||b.map?m(a,d,k):a,c["..unshift"](a))}}}return j.extend?j.extend(c)||c:c}function r(a,d){var e,b,c=s(a),f=a===c,g=typeof c;n(d,null);if(null===a)return null;if(void 0!==a&&a["..unmap"])e=a["..unmap"](a);else if(null===c||c.hasOwnProperty("..appended"))e=c;else if(p(c,g)&&!f)e=c;else if(l(c,g))for(b in e={},c)e[b]=r(c[b],
{name:b,parentChildName:("[i]"===d.name?d.parentChildName:d.name)+"."+b,qualifiedName:d.qualifiedName+"."+b});else if(q(c,g)){e=[];for(b=0;b<c.length;b++)e.push(r(c[b],{name:"[i]",parentChildName:d.name+"[i]",qualifiedName:d.qualifiedName+"[i]"}))}return e}function t(a,d,e){var b,c,f,g,k,j,h=s(d);c=typeof h;f=d!==h;n(e,null);if(!(null===d||void 0===d)&&!d.hasOwnProperty("..appended"))if(!(void 0===d||h===a))if(f&&(null===h||void 0===h)^(null===a||void 0===a))d(a);else if(l(h,c)&&l(a,c))for(b in a)(d=
h[b])&&"function"===typeof d["..map"]?x(d)?d(s(d["..map"](a[b]))):h[b]=h[b]["..map"](a[b]):a&&null===a[b]&&l(h[b],typeof h[b])?h[b]=null:t(a[b],h[b],{name:b,parentChildName:("[i]"===e.name?e.parentChildName:e.name)+"."+b,qualifiedName:e.qualifiedName+"."+b});else if(q(h,c))if(j=h[0]["..idName"]){g=[];for(b=a.length-1;0<=b;b--){f=!1;k=a[b][j];for(c=h.length-1;0<=c;c--)if(k===h[c][j]()){t(a[b],h[c],{name:"[i]",parentChildName:e.name+"[i]",qualifiedName:e.qualifiedName+"[i]"});f=!0;g[c]=!0;break}f||
d.splice(b,1)}for(b=a.length-1;0<=b;b--)g[b]||d.push(a[b])}else{d([]);for(b=0;b<a.length;b++)"function"===typeof d["..map"]?d.push(d["..map"](a)):d.push(a[b])}else f&&d(a)}var s=ko.utils.unwrapObservable,x=ko.isObservable,v=ko.observable,w=ko.observableArray,u={name:"{root}",parentChildName:"{root}",qualifiedName:"{root}"};return{mappingCompatability:!1,logging:!1,fromModel:function(a,d){var e={},b,c,f,g;for(g in d)if(b=d[g]||{},void 0!==b.length)for(c=0;c<b.length;c++)f=b[c],e[f]={},e[f][g]=!0,e[f].settingType=
g;else for(f in b)e[f]={},e[f][g]=b[f],e[f].settingType=g;ko.viewmodel.logging&&window.console&&window.console.log("Mapping From Model");return m(a,e,u)},toModel:function(a){ko.viewmodel.logging&&window.console&&window.console.log("Mapping To Model");return r(a,u)},updateFromModel:function(a,d){ko.viewmodel.logging&&window.console&&window.console.log("Update From Model");return t(d,a,u)}}}();